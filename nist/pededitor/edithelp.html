<html>
<head>
<title>PED Edit Window Help</title>
</head>
<body>

<p>This program is used to create new phase equilibria diagrams or to
digitize images of existing ones. It can also be used for general
two-dimensional scientific drawing and digitization.</p>

<h2>File Menu</h2>

<h3>New Diagram</h3>

<p>Create a new diagram from scratch. If you wish to digitize a
scanned image of an existing diagram, use the
<code><u>F</u>ile/<u>O</u>pen</code> option instead.</p>

<p>You are presented with a selection of diagram types. Select the
"Binary" diagram type to draw a rectangular graph using a Cartesian
coordinate system. Select the "Other/Schematic" type to draw free-form
diagrams starting from a blank page. There are also various subtypes
of ternary diagram, if you happen to need those.</p>

<h3>Open</h3>

<p>Open either an image file saved in GIF, JPEG, or PNG format or a
diagram that was previously saved in this program's native
<code>PED</code> format.</p>

<p>If you open an image file, you will be given the opportunity to
select the boundary of a diagram within that file and then create a
new diagram traced from the old one. For more details, consult the
Diagram Selection Window's help menu option.</p>

<h3>Save / Save As PED</h3>

<p>Save a diagram as a file in this program's native PED format. This
is the only choice that allows you to reload the diagram later in this
program and continue where you left off.</p>

<h3>Save as PDF</h3>

<h3>Save as PNG</h3>

<h3>Save as SVG</h3>

<p>Save an image of the diagram. These formats are only intended to
create files that other programs can read; they are not useful for
saving and reloading diagrams in the PED editor. Diagrams saved as PDF
or SVG tend to be of higher quality than diagrams saved as PNG.

<h3>Print</h3>

<p>Print the diagram. The image will be scaled so that its margins
just fit on the sheet. You can make the printed image appear smaller
or larger by adjusting the margins as defined
under <u>P</u>roperties/<u>M</u>argins.

<h3>Reload</h3>

<p>Reload the current diagram from disk if the diagram was
previously opened or saved in PED format.

<h2>Position Menu</h2>

<p>In addition to moving the mouse pointer, the following commands are
available for diagram positioning:</p>

<ul>

<li><p><b>Jump to selection</b> moves the mouse pointer to the
currently selected item, if an item is selected.</p></li>

<li>

<b>Select nearest point</b> (<code>Shift+Q</code>) moves the mouse to and selects the nearest key point. Key points include

<ul>
  <li>arrows</li>
  <li>vertexes of curves</li>
  <li>label anchor points and centers</li>
  <li>corners of tie line regions</li>
  <li>ruler endpoints</li>
</ul>

<p>If pressing <code>Shift+Q</code> once does not highlight the item you
want, you may press it again and again to highlight other items
located nearby.</p>

<p><b>Nearest point</b> (<code>q</code>) moves the mouse to the
nearest key point, but does not select it. <code>Nearest point</code>
recognizes the following key points, in addition to those recognized
by <code>Select nearest point</code>:

<ul>
  <li>curve and line intersections
  <li>corners of the diagram
  <li>segment midpoints
  <li>If an item is selected, then the point on the curve nearest the
    mouse that is nearest to the selection is also considered to be a
    key point. (In other words, first identify the curve closest to
    the mouse. The point on that curve that is closest to the
    selection is a key point.)
</ul>

</li>

<li><b>Select nearest line/curve</b> (<code>Shift+W</code>) moves the
mouse to the the nearest point on any ruler or curve, and it selects
the nearest vertex on that ruler or curve.

<li><b>Nearest line/curve</b> (<code>w</code>) moves the mouse to the
the nearest point on any ruler or curve.

<li><b>Enter coordinates</b> (<code>Enter</code>) allows you to type
in the coordinates you would like the mouse to move to. If you enter
coordinates that are off the diagram page, the page will be enlarged
to put the position on its edge.</li>

<li>The arrow keys move the mouse pointer in one pixel in any
direction. In addition, if the mouse is positioned on a selected item
(highlighted in green unless the item was green to begin with, in
which case it is highlighted in magenta), then that item and every
other item located at the same position will move along with the mouse
pointer.</li>

<li><p>Auto-position the mouse (<code>Shift+A</code>) or auto-position
the mouse and add a point at the mouse's new location
(<code>Shift+Left-Click</code> or <code>Shift+X</code>).</p>

<p>Holding the shift key down while moving the mouse will reveal the
auto-position location. All of the following are candidates for
auto-positioning:</p>

<ul>
<li><b>Key points</b>: Key points are highlighted in yellow.</li>

<li><b>Curves and rulers</b>: If no key point is nearby but a curve or
ruler is, then the nearest point on it is selected in orange.</li>

<li><p><b>Grid lines</b>: If an item is selected, then for purposes of
identifying key points and curves, the program behaves as if the
diagram contains grid lines through the selection location (and
through the secondary selection, if there is one).</p>

<p>Grid line orientations include the following: horizontal and
vertical lines; the angle value indicated in the "Tangent" window; in
ternary diagrams, lines that are at 60 and 120 degrees; and lines of
zero change of user-defined variables created using
<code>P<u>r</u>operties/<u>V</u>ariables/<u>A</u>dd</code>.</p>

<p>Sometimes the auto-positioning is attracted by a key point that
prevents you from clicking on a curve or grid line instead. You may
avoid this problem by pressing using '+' to zoom in until the screen
distance to the key point becomes large enough that it no longer
attracts the mouse pointer.</p>
</li>
</ul>

<p>To protect users against involuntary mouse movenets, the cursor
stays at the chosen position after you perform a mouse positioning
command even if the mouse shifts by a couple pixels. The chosen
position will be marked with a yellow cross if that position is
different from the mouse position. Moving the mouse a larger distance
or pressing <code>u</code> will cause the cursor to resume following
the mouse pointer. In addition, the mouse may automatically become
unstuck before you perform an operation that would otherwise be
redundant, such as adding a second vertex to a curve in a row.

<p>Pressing <code>Control+Shift+S</code> will copy the contents of the
status bar (the gray bar at the bottom of the edit window) to the
clipboard.

</ul>

<h2>Edit Selection Menu</h2>

<p>These commands all operate on the selection (highlighted
in <font color="green">green</font>) if there is one. If there is not,
some of these commands generate an error, while others fall back on
operating on the nearest key point.

<ul>

<li>Press <code>Delete</code> to delete the selection.</li>

<li>Press <code>End</code> or the right mouse button to deselect the
item.</li>

<li>Press <code>r</code> to change the selection's color. If the
selection is highlighted in green, you may not notice the color change
until you deselect the item.</li>

<li>Press <code>c</code> to create a copy to the selection at the
current mouse position.</li>

<li>Press 'e' to edit the selected item's properties. Only labels,
rulers, and sets of tie lines may be edited this way.

<li>Press <code>v</code> to move the selected vertex or item and all
other items at the same location.

<li>Press <code>Shift+V</code> to move the selected vertex or item
only.

<li>Press <code>Shift+R</code> to move the selected curve or ruler and
all selectable key points that lie on or in that curve or ruler.

<li>Press <code>d</code> to change the selected item's color, line thickness (if applicable), and line style (if applicable) to the current default values.

<li>Press <code>Shift+D</code> to change the current default values
for color, line thickness (if applicable), and line style (if
applicable) to match the selected item. So
pressing <code>Shift+D</code> on one item and then
pressing <code>d</code> on others is a quick way to change many things
to match the first thing.

</ul>

<h2>Curves and Vertexes</h2>

<p>If a vertex (curve control point) is currently selected, then it is
marked by a small solid green circle. Other control points on the same
curve are indicated by small open green circles.</p>

<h3>Starting a new curve</h3>

<p>If a curve is already selected, press <code>End</code> or the right
mouse button to deselect it.

<p>Position the mouse where the first vertex of the new curve belongs
and press <code>x</code> or the left mouse button. To start a new
curve at the auto-position location instead, hold down the shift key
as you press <code>x</code> or the left mouse button.

<p>As mentioned under <b>Position</b>, you may
press <code>Shift+W</code> or <code>Shift+Q</code> to select a curve.

<p>A curve consisting of a single point is represented as a dot twice
as wide as the current line width. It is possible to mark data points
as 1-point curves that way, but labels provide more flexibility in
marking data points.

<h3>Adding a point to a curve</h3>

<p>As mentioned under <b>Position</b>, you may
press <code>Shift+W</code> or <code>Shift+Q</code> to select a curve.

<p>Position the mouse where the new vertex goes and
press <code>x</code> or the left mouse button. To add a point at the
auto-position location instead, hold down the shift key as you
press <code>x</code> or the left mouse button.

<h3>Curve smoothing</h3>

<p>Curve smoothing is initially turned off when you start the program.
With curve smoothing off, curves consisting of three or more points
are presented as a series of connected line segments or (for closed
curves) a polygon.

<p>Pressing 's' will turn smoothing on for all new vertexes in curves.
The smoothing setting is global, so to turn on smoothing for all
curves, it suffices to press 's' once when you start the program.
Pressing 's' again will turn smoothing off.

<p>Pressing 's' only changes the program's behavior when adding new
vertexes. To toggle the smoothing setting of an existing vertex,
select that vertex and press comma (,). If you need to change the
smoothing setting for a whole curve, you will need to change the
smoothing settings for each vertex individually. The bracket shortcut
keys ('<code>[</code>' and '<code>]</code>'), which select the
previous and next vertex in a curve, can help you do that faster, but
it is fastest just to use '<code>s</code>' to get the smoothing
setting right the first time.

<h3>Curve closure</h3>

<p>All curves start in the unclosed state. Pressing 'o' will toggle
the currently selected curve between the unclosed and closed states.
Closed curved return to their starting vertexes.

<h3>Line styles</h3>

<p>Use the <code><u>C</u>urve/Line style</code> menu item and select
your preferred line style to change the style of the currently
selected item (if any) and the initial style of any subsequently added
items. The spacing of dots and dashes is proportional to the line
width: if you reduce the width of a dashed line by half, then the
length of the dashes is also reduced by half.</p>

<h3>Line widths</h3>

<p>Use the <code><u>C</u>urve/Line width</code> menu item to change
the line width for the currently selected item (if any) and the
initial line width of any subsequently created items.</p>

<h3>Fill styles</h3>

<p>Use the <code><u>C</u>urve/<u>F</u>ill style</code> menu item and
select your preferred fill style to fill the interior of a closed
curve (you must turn on curve closure, using 'o', before you select a
fill style) with the chosen pattern in the current default color.

<h2>Decoration Menu</h2>

<h3>Labels</h3>

<p>Press 't' to add text or a symbol anchored at the current mouse
position. A window will open, permitting you to choose the text, font
size, angle, and anchor orientation for the label.</p>

<p>The standard font size has characters whose height is about 2% of
the height of binary diagrams and 2% of the length of the longest side
of ternary diagrams. </p>

<p>Use the <code>H2SO4-&gt;H<sub>2</sub>SO<sub>4</sub></code> button
to automatically add subscripts to chemical formulas.</p>

<p>The circle with the green arrow illustrates angle values but is not
a usable control. Edit the number in the text box to change the text
angle.</p>

<p>The nine anchor buttons determine whether the label will be
centered at the anchor or will have a corner or center of one side
located there. The anchors use the text's frame of reference: for
example, if the label reads "Foo" and the lower right button is
selected, then the corner of the F will lie closest to the anchor, no
matter what text angle is selected.

<p>If you check the box for <b>White label background</b>, a white
rectangle will be printed behind the label. White label background only
obscures decorations beneath the label, so you may need to use
the <code><u>E</u>dit/<u>L</u>ayer/<u>t</u>o Top</code> command as
well.

<p>If you check the box for <b>White character holes</b>, the insides
of hollow letters and characters will be painted white. This option is
mostly useful for symbols, and it insures that a hollow circle plotted
over a solid line is not mistaken for a solid circle. White character
holes only obscure decorations beneath the label, so you may need to
use the <code><u>E</u>dit/<u>L</u>ayer/<u>t</u>o Top</code> command as
well.

<p>If you check the box for <b>Label border</b>, the label will be surrounded
by a thin border.

<p>The copy command ('c') can be used to easily duplicate a symbol in
many locations, such as when marking data points.</p>


<h4>Arrowheads</h4>

<p>To draw an arrowhead that points at the angle indicated in the
"Tangent" window, press '&gt;'. To draw an arrowhead that points in
the opposite direction, press '&lt;'. The size of the arrowhead is
determined by the line width indicated in the "Tangent" window.</p>

<h4>Rulers</h4>

<p>To create a ruler, first create a two-vertex line to mark the
ruler's endpoints, then select <code><u>D</u>ecorations/Add
r<u>u</u>ler</code>. A ruler edit window will open.</p>

<p>There is currently no way to automatically generate a ruler that
displays weight percent values in a mole-percent diagram or vice
versa. All you can do is convert the entire diagram between the two
states.</p>

<p><b>TODO</b> The ruler behavior may be controlled by hidden variables. I need to add those variables to the dialog!

<h4>Tie Lines</h4>

<p>To create a set of tie lines, select <code><u>D</u>ecorations/Add
<u>t</u>ie lines</code> and follow the instructions in the window that
opens. </p>

<p>If tie lines connect two segments or curves, instead of connecting
a curve to a point, then the two outermost tie lines had better
intersect somewhere outside the region created by the tie lines, or
else there will be trouble. It's hard to explain. That's another TODO
item.</p>

<h2>Properties Menu</h2>

<ul>

<li><b>Aspect Ratio</b>: change the ratio of the diagram's width to
its height by uniformly rescaling its horizontal dimension. This may
cause existing curve intersections to shift (so lines that used to
intersect may not quite do so anymore, or they may intersect at a
slightly different location), so it is best to set the aspect ratio as
early as possible.</li>

<li><p><b>Font</b>: The program uses variants of the DejaVu LGC Serif and
Sans Serif font families. <code>Serif (widely spaced lines)</code>
exists for backwards compatibility; it is not recommended for use in
new diagrams.</p>

<p>This menu selection allows you to globally change the font
selection among one of three choices. Changing fonts for individual
items is not currently possible.

<li><b>Key/Value Pairs</b>: Allows the user to store data that
consists of a string key and a string value. A value of
the empty string is taken to mean "delete this key", so the empty string
cannot be stored as a value.</li>

<li><b>Margins</b>: If you need to align your diagram in a specific
way, or if you need to extend a diagram in any direction, you may set
the left, right, top, and bottom margins using these menu options. The
<code><u>A</u>uto-fit</code> option eliminates excess white space on
all sides. It is a good idea to allow generous margins while you are
editing the diagram, and then select <code><u>A</u>uto-fit</code> when
finished.</li>

<li><b>Scale</b>: This option allows you to change the units of the X
and Y axis, while the positions of items on the screen remains the
same. This option is most often used to change the axes' initial
ranges to the values you really want, but it can also be used to
change a diagram's range from Celsius to Kelvin, for example.</li>

<li><b>Tags</b>: Allow the user to store free-form string data. Apart
from permitting the user to add, delete, and display tags, the program
does nothing with these.</li>

<li><b>Title</b>: Change the title of the diagram as displayed in the
menu bar and in printouts. If you want no title, then change the title
to the empty string so it will be deleted.</li>

<li><b>Variables</b>: You can delete existing variables or add new
ones that are affine transformations of the existing ones; that is,
variables that have the form

  <blockquote><code>a x + b y + c</code></blockquote>

<p>New variables will be shown in the gray status bar at the bottom of
the edit window and may be used to define ruler tick mark values.
Select this menu item and then follow the instructions in the error
message to learn how to do this.

</ul>

<h2>Digitize Menu</h2>

<ul>

<li><p><b>Copy all text to clipboard</b>: Copies all labels, key values, tags, and diagram components, with duplicates removed, to the clipboard, with each entry terminated by a newline.

<li><p><b>Copy label or curve coordinates to clipboard</b>: If a curve
is highlighted, then the principal coordinates (<code>x</code>
and <code>y</code> coordinates for binary diagrams, and right
component and top component values for ternary diagrams) of every
point in the curve will be copied to the clipboard, one coordinate per
line, with the x and y values separated by commas. If a label (usually
a symbol that denotes a data point) is highlighted, then the
coordinates of that label and every other label that shares the same
text will be copied. For instance, if you have highlighted an open
circle, then the coordinates of every open circle will be copied.

<li><p><b>Copy label or curve coordinates from clipboard</b>: This is
the reverse of the previous operation. If nothing is highlighted, a
new curve will be created from the coordinates in the clipboard. If a
curve is highlighted, then the points will be added to it. If a label
is highlighted, then identical labels will be added at each
coordinate.

<li><p><b>Copy status bar to clipboard</b>
(<code>Control+Shift+S</code>): This copies the text in the gray
status bar at the bottom of the edit window to the clipboard. Since
the contents depend on the current mouse position, you will probably
need to use the keyboard shortcut to do this.

</ul>

<h2>Chemistry Menu</h2>

<ul>

<li><p><b>Components</b>: Identify the diagram components for binary and
ternary diagrams. Binary diagrams whose X-axis is measured on a scale
from (100% of substance A, 0% of B) have a left and right diagram
component, while ternary diagrams have a left, right, and top
component. In this context, the diagram components are the compounds
that correspond to 0 and 100% of your independent variables, even if
the displayed domain is a subset of that.

<p>The program's chemistry functions cannot work unless you define the
formulas for both (or all, in the case of ternary diagrams) diagram
components. <code>Co(H2O)2</code> is an example of a formula the
program can parse; <code>water</code> is not.

<p>As soon as all diagram components are defined, the gray status bar
will show additional information about points on the screen. If a
position in the diagram corresponds precisely to a round formula, that
formula will be shown; otherwise, a decimal estimation of the formula
will be shown. Also, component values will be shown as a
pair <code>mole percent/weight percent</code>.

<p>The status bar is more useful if you enter coordinates precisely. A
coordinate value of 1/3 Fe, 2/3 Al will be displayed as Al2Fe, but an
approximate coordinate value of 33.3% Fe, 66.7% Al will not. Also,
only if the coordinates in the diagram you create are precisely
correct, users of the program can use <code>Shift+left mouse
button</code> or <code>q</code> to find the exact chemical formula at
any vertex or intersection.

<p>Also pay attention to your percent symbols and to the <code>Use
percentages in labels</code> check box. If you wish to show percentage
values (that is, values that are 100 times greater than the proportion
values) in a ruler, that box should be checked. Check the status bar:
a vaolue of 77% should be displayed as either 0.77 or as 77%. A
display value of "77" or "7700%" indicates the variable scale is
wrong.

<li><p><b>Proportions/Already displaying mole fraction</b>: The
program doesn't know whether your input data are in mole percent or
weight percent until you tell it. If the first element of the supposed
mole percent/weight percent pair is actually showing the weight
percent, then you need to check this box. If the second element of the
pair is actually showing the mole percent, then you need to un-check
this box.

<li><p><b>Proportions/Convert to [weight/mole] fraction</b>: Only one
of these operations will be enabled, because you cannot convert a
diagram to display weight fraction, for example, if it already
displays weight fraction. These operations transform the entire
diagram between weight and mole fraction values.

<p>There is no guarantee that every point on every curve of the
diagram will be correct after you perform a conversion, and points
outside the diagram may not line up very well at all. The diagram may
look funny, especially if there is a wide divergence between the mole
and weight percents.

<li><p><b>Formula to mole/weight fraction</b> (also available by
pressing the <code>%</code> key, that is (on US
keyboards) <code>Shift+5</code>): Enter a chemical formula, and the
mouse will move to the position in the diagram that that formula
corresponds to. The next step may be to press 't' to put a label at
that location and maybe (for Windows) press <code>Control-V</code> to
label that location with the formula.

<li><p><b>Copy all formulas to clipboard</b>: Copy all unique formulas
in the diagram to the clipboard in alphabetical order, separated by
newlines. For example, if there is a label that reads "I saw H2O", then the
formula list will include "H2O" and "I", since I is the chemical formula for iodine.

</ul>

<h2>View Menu</h2>

<p>Press '-' to zoom out, '+' to zoom in, and <code>Control-B</code>
to obtain the best fit of the diagram to the edit window's current
size. Press <code>Control-L</code> to center the screen at the current
mouse position.</p>

<p>If an image is displayed in the background, then resizing the
scanned image or moving around at high zoom level may take some time,
so be patient. If the delay becomes excessive, you can turn the
background image off with <code><u>V</u>iew/<u>B</u>ackground
Image/<u>N</u>one</code>.</p>

<p>Unfortunately, <code>Zoom to selection</code> and <code>Center
mouse</code> do not work reliably. This may be an issue in Java Swing.

<p>Use the <code>Background Image</code> submenu to select how to
display the original image (if any) in the background of the new
diagram: in light, faded colors (the default); blinking on and off; or
not at all. The <code>D<u>e</u>tach</code> option permanently removes
the linkage between the original image and the diagram.</p>


</body>
</html>
